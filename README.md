# Gemini CLI Extension - Looker

> [!NOTE]
> This extension is currently in beta (pre-v1.0), and may see breaking changes until the first stable release (v1.0).

This Gemini CLI extension provides a set of tools to interact with [Looker](https://cloud.google.com/looker/docs) instances. It allows you to manage your Looks, dashboards, and explores directly from the [Gemini CLI](https://google-gemini.github.io/gemini-cli/), using natural language prompts.

Learn more about [Gemini CLI Extensions](https://github.com/google-gemini/gemini-cli/blob/main/docs/extensions/index.md).
> [!IMPORTANT]
> **We Want Your Feedback!**
> Please share your thoughts with us by filling out our feedback [form][form]. 
> Your input is invaluable and helps us improve the project for everyone.

[form]: https://docs.google.com/forms/d/e/1FAIpQLSfEGmLR46iipyNTgwTmIDJqzkAwDPXxbocpXpUbHXydiN1RTw/viewform?usp=pp_url&entry.157487=looker

## Why Use the Looker Extension?

* **Seamless Workflow:** Stay in your CLI. No need to constantly switch contexts.
* **Connect to Looker:** Securely connect to your Looker instances.
* **Natural Language Usage:** Stop wrestling with complex commands. List models, explores, and dimensions, and run Looks and queries by describing what you want in plain English.


## Prerequisites

Before you begin, ensure you have the following:

* [Gemini CLI](https://github.com/google-gemini/gemini-cli) installed with version **+v0.6.0**.
* Setup Gemini CLI [Authentication](https://github.com/google-gemini/gemini-cli/tree/main?tab=readme-ov-file#-authentication-options).
* A Looker instance with API access enabled.

## Getting Started

### Installation

To install the extension, use the command:

```bash
gemini extensions install https://github.com/gemini-cli-extensions/looker
```

### Configuration

You will need a Looker Client Id and Client Secret. These can be obtained by
following the directions at [Looker API authentication](https://cloud.google.com/looker/docs/api-auth#authentication_with_an_sdk). If you
don't have access to the Admin pages of the Looker system, you will need to ask
your administrator to get the Id and Secret for you.

Set the following environment variables before starting the Gemini CLI. These variables can be loaded from a `.env` file.

```bash
export LOOKER_BASE_URL="<your-looker-instance-url>"  # e.g. `https://looker.example.com`. You may need to add the port, i.e. `:19999`.
export LOOKER_CLIENT_ID="<your-looker-client-id>"
export LOOKER_CLIENT_SECRET="<your-looker-client-secret>"
export LOOKER_VERIFY_SSL="true" # Optional, defaults to true
export LOOKER_SHOW_HIDDEN_MODELS="true" # Optional, defaults to true
export LOOKER_SHOW_HIDDEN_EXPLORES="true" # Optional, defaults to true
export LOOKER_SHOW_HIDDEN_FIELDS="true" # Optional, defaults to true
```

### Start Gemini CLI

To start the Gemini CLI, use the following command:

```bash
gemini
```

## Usage
You can ask questions and give commands such as these:

1. What models are available in my Looker instance?
2. What explores are available in *model_name*?
3. What measures and dimensions are in *explore_name*?
4. Using *model_name*, what is the total revenue in 2025? Break that
   down by month and pivot by product category.
5. What is the sql for that last query?
6. Visualize that data using a stacked column chart and give me the url to it.
7. Save that as a Look.
8. Run the Look titled "Revenue Projection".
9. Create a dashboard analyzing sales for the year 2025.

## Supported Tools

* `get_models`: Use this tool to list the LookML models in Looker.
* `get_explores`: Use this tool to list the explores in a given model.
* `get_dimensions`: Use this tool to list the dimensions in a given explore.
* `get_measures`: Use this tool to list the measures in a given explore.
* `get_filters`: Use this tool to list the filters in a given explore.
* `get_parameters`: Use this tool to list the parameters in a given explore.
* `query`: Use this tool to run a query and return the data.
* `query_sql`: Use this tool to return the SQL generated by Looker for a query.
* `query_url`: Use this tool to return a link to the query in Looker for further exploration.
* `get_looks`: Use this tool to return the saved Looks that match a title or description.
* `run_look`: Use this tool to run a saved Look and return the data.
* `make_look`: Use this tool to create a saved Look in Looker and return the URL.
* `get_dashboards`: Use this tool to return the saved dashboards that match a title or description.
* `make_dashboard`: Use this tool to create a saved dashboard in Looker and return the URL.
* `add_dashboard_element`: Use this tool to add a tile to a dashboard.
* `health_pulse`: Use this tool to perform a health check on a Looker instance.
* `health_analyze`: Use this tool to analyse the usage of projects, models, and
  explores in Looker.
* `health_vacuum`: Use this tool to suggest LookML objects that might be
  removed.
* `dev_mode`: Use this tool to turn dev mode on or off.
* `get_projects`: Use this tool to retrieve the LookML projects in a Looker instance.
* `get_project_files`: Use this tool to retrieve the LookML files in a project.
* `get_project_file`: Use this tool to retrieve the content of a LookML file.
* `update_project_file`: Use this tool to modify a LookML file.
* `create_project_file`: Use this tool to create a LookML file.
* `delete_project_file`: Use this tool to delete a LookML file.

## Additional Extensions

Find additional extensions to support your entire software development lifecycle at [github.com/gemini-cli-extensions](https://github.com/gemini-cli-extensions).

## Troubleshooting

Use `gemini --debug` to enable debugging.

Common issues:

* "failed to find default credentials: google: could not find default credentials.": Ensure [Application Default Credentials](https://cloud.google.com/docs/authentication/gcloud) are available in your environment. See [Set up Application Default Credentials](https://cloud.google.com/docs/authentication/external/set-up-adc) for more information.
* "✖ Error during discovery for server: MCP error -32000: Connection closed": The database connection has not been established. Ensure your configuration is set via environment variables.
* "✖ MCP ERROR: Error: spawn /Users/USER/.gemini/extensions/cloud-sql-sqlserver/toolbox ENOENT": The Toolbox binary did not download correctly. Ensure you are using Gemini CLI v0.6.0+.
* "cannot execute binary file": The Toolbox binary did not download correctly. Ensure the correct binary for your OS/Architecture has been downloaded. See [Installing the server](https://googleapis.github.io/genai-toolbox/getting-started/introduction/#installing-the-server) for more information.
